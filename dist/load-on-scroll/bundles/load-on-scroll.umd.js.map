{"version":3,"file":"load-on-scroll.umd.js.map","sources":["ng://load-on-scroll/lib/load-on-scoll.directive.ts","ng://load-on-scroll/lib/load-on-scroll.module.ts"],"sourcesContent":["import { Directive, Input, Output, EventEmitter, ElementRef, Renderer2, HostListener } from '@angular/core';\nimport { Subject, Subscription, fromEvent } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Directive({\n  selector: '[dmLoadOnScoll]'\n})\nexport class LoadOnScollDirective {\n  @Input()\n  first: number = 0;\n\n  @Input()\n  itemsPerPage: number;\n\n  @Input()\n  loadDoneSubject: Subject<any>;\n\n  @Input()\n  rotateOnLoadChildSelector: string;\n\n  @Input()\n  rotateOnLoad = false;\n\n  @Input()\n  disableOnLoad = false;\n\n  @Input()\n  bottomPixelBorder = 25;\n\n  @Output()\n  loadTrigger = new EventEmitter<any>();\n\n  private scrollSubscription: Subscription;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    this.emitCurrentValues();\n  }\n\n  ngOnChanges() {\n    if (this.scrollSubscription) this.scrollSubscription.unsubscribe();\n\n    this.scrollSubscription = fromEvent(window, 'scroll')\n      .pipe(debounceTime(200))\n      .subscribe(e => {\n        if (window.scrollY + window.innerHeight + this.bottomPixelBorder >= document.body.scrollHeight) {\n          this.onClick();\n        }\n      });\n\n    if (this.loadDoneSubject) {\n      this.loadDoneSubject.subscribe(e => {\n        this.setOnLoad(false);\n      });\n    }\n  }\n\n  @HostListener('click')\n  onClick() {\n    this.setOnLoad(true);\n    this.first += this.itemsPerPage;\n    this.emitCurrentValues();\n  }\n\n  private emitCurrentValues() {\n    this.loadTrigger.emit({\n      limit: this.itemsPerPage,\n      first: this.first\n    });\n  }\n\n  private setOnLoad(load: boolean) {\n    if (this.disableOnLoad) this.disable(load);\n    if (this.rotateOnLoad) this.rotate(load);\n  }\n\n  private rotate(on: boolean) {\n    const componentToRotate = this.rotateOnLoadChildSelector\n      ? this.el.nativeElement.querySelector(this.rotateOnLoadChildSelector)\n      : this.el.nativeElement;\n\n    if (on) this.renderer.addClass(componentToRotate, 'los-rotate');\n    else this.renderer.removeClass(componentToRotate, 'los-rotate');\n  }\n\n  private disable(on: boolean) {\n    this.renderer.setProperty(this.el.nativeElement, 'disabled', on);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LoadOnScollDirective } from './load-on-scoll.directive';\n\n@NgModule({\n  declarations: [LoadOnScollDirective],\n  imports: [],\n  exports: [LoadOnScollDirective]\n})\nexport class LoadOnScrollModule {}\n"],"names":["EventEmitter","fromEvent","debounceTime","Directive","ElementRef","Renderer2","Input","Output","HostListener","NgModule"],"mappings":"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"}
